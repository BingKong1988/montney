{
    "collab_server" : "",
    "contents" : "library(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nrawdata <- read.csv(\"Frac_Export.csv\")\nclean <- filter(rawdata, Completed.Zone == \"Montney\")\nclean$Completed.Zone <- droplevels(clean$Completed.Zone)\nclean[[3]] <- as.Date(as.character(clean[[3]]),\"%m/%d/%Y\")\nclean <- mutate(clean, \n                year = format(clean[[3]], \"%Y\"),\n                yearmonth = format(clean[[3]], \"%Y%m\"))\n\n\ntgt <- filter(clean, year > 2000)\nggplot(tgt, aes(factor(tgt$yearmonth))) +\n      theme(axis.text.x = element_text(angle = 45, hjust = 1),\n            plot.title = element_text(hjust = 0.5)) +\n      scale_x_discrete(breaks=function(x) x[as.numeric(x) %% 20 == 1]) +\n      geom_bar() +\n      labs(x = \"Time(YearMonth)\",\n           y = \"Count of new completed well of a month\",\n           title = \"Number of monthly completed well in Montney formation\")\n \nwti <- read.csv(\"DCOILWTICO.csv\", na.strings = \".\")\nbrent <- read.csv(\"DCOILBRENTEU.csv\", na.strings = \".\")\nwti[[1]] <- as.Date(wti[[1]], \"%Y-%m-%d\")\nbrent[[1]] <- as.Date(brent[[1]], \"%Y-%m-%d\")\nwti <- wti[!is.na(wti[[2]]), ]\nbrent <- brent[!is.na(brent[[2]]), ]\noilprice <- merge(wti, brent, by.x = \"DATE\", by.y = \"DATE\", all.x = T)\nnames(oilprice) <- c(\"date\", \"wti\", \"brent\")\n\n\ng <- ggplot(oilprice[oilprice$date > \"2000-01-01\",], aes(x = date))\ng + \n      geom_line(aes(y = wti), color = \"green\", alpha = 0.3) +\n      geom_line(aes(y = brent), color = \"red\", alpha = 0.3) +\n      labs(x = \"Time(Year)\",\n           y = \"Oil Price(USD)\") +\n      scale_y_continuous(sec.axis = sec_axis(~.+5, name = \"Relative humidity [%]\"))\n\nwellcount <- as.data.frame(table(clean$yearmonth))\nnames(wellcount) <- c(\"date\", \"count\")\nwellcount$date <- as.Date(paste(wellcount$date, \"01\", sep = \"\"), \"%Y%m%d\")\ncount.n.price <- merge(wellcount, oilprice, by.x = \"date\", by.y = \"date\", all.x = T)\nggplot(data = count.n.price[count.n.price$date > \"2000-01-01\",]) +\n      geom_bar(mapping = aes(x = date, y = count), stat = \"identity\") +\n      geom_line(data = oilprice[oilprice$date > \"2000-01-01\",], \n                mapping = aes(x = date, y = wti * 0.8, colour = \"WTI\"), \n                alpha = 0.6, na.rm = T) +\n      geom_line(data = oilprice[oilprice$date > \"2000-01-01\",], \n                mapping = aes(x = date, y = brent * 0.8, colour = \"BRENT\"), \n                alpha = 0.6, na.rm = T) +\n      scale_color_manual(\"\",\n                         breaks = c(\"WTI\", \"BRENT\"),\n                         values = c(\"red\", \"blue\")) +\n      scale_y_continuous(breaks = seq(0, 120, 20), \n                         labels = seq(0, 120, 20),\n                         sec.axis = sec_axis(~./0.8, \n                                             name = \"Crude oil price/USD\", \n                                             breaks = seq(0,150,25), \n                                             labels = seq(0,150,25))) +\n      scale_x_date(date_breaks = \"2 year\", date_labels = \"%Y\") +\n      labs(x = \"Time/Year\",\n           y = \"Count of monthly completed wells\",\n           title = \"Number of monthly completed well in Montney formation\") +\n      theme(plot.title = element_text(hjust = 0.5, face=\"bold\", size=16, \n                                      color = \"grey58\", family = \"serif\"),\n            axis.title = element_text(hjust = 0.5, face=\"bold\", size=12, \n                                      color = \"grey58\", family = \"serif\"),\n            axis.text = element_text(hjust = 0.5, size=8, \n                                     color = \"grey28\", family = \"serif\"),\n            legend.text = element_text(hjust = 0.5, face=\"bold\", size=8, \n                                       color = \"grey58\", family = \"serif\"))\n\n\n\n\n\n\n\n\n\n\n\n",
    "created" : 1488918800499.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2049167938",
    "id" : "F45C65D7",
    "lastKnownWriteTime" : 1489005309,
    "last_content_update" : 1489005309190,
    "path" : "~/R/montney/montney.R",
    "project_path" : "montney.R",
    "properties" : {
        "docOutlineVisible" : "0",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}